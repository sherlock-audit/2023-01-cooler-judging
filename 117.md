peanuts

medium

# Use safeTransfer and safeTransferFrom instead of transfer and transferFrom for ERC20 contracts

## Summary

The transfer() and transferFrom() functions return a boolean value and needs to be checked for success. Some tokens like USDT do not revert if the transfer failed but return false instead.

## Vulnerability Detail

Some tokens (like USDT) don't correctly implement the EIP20 standard and their transfer/ transferFrom function return void instead of a success boolean. Calling these functions with the correct EIP20 function signatures will always revert.

## Impact

Tokens that don't correctly implement the latest EIP20 spec, like USDT, will be unusable in the protocol as they revert the transaction because of the missing return value. Since this is a borrowing and lending platform, any ERC20 tokens should be applicable.

## Code Snippet

https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L85
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L102
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L122
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L123
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L146
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L179
https://github.com/ohmzeus/Cooler/blob/a08697c0cbb6e5cbaf0a534a66c6d88e277db207/src/Cooler.sol#L205


## Tool used

Manual Review

## Recommendation

Recommend using OpenZeppelin's SafeERC20 versions with the safeTransfer and safeTransferFrom functions that handle the return value check as well as non-standard-compliant tokens.